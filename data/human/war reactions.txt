# Copyright (c) 2022 UnorderedSigh and MasterOfGrey
#
# Endless Sky is free software: you can redistribute it and/or modify it under the
# terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later version.
#
# Endless Sky is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE. See the GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License along with
# this program. If not, see <https://www.gnu.org/licenses/>.

########################################################################

# This file contains human reactions to the pug war, and events
# leading up to it.  It lets us know how regular, everyday people felt
# about the war. This leads to the reveal of the Hai, who are unable
# to stay hidden with so many people thinking about aliens.

mission "00 Post-War Reactions Begin"
	landing
	invisible
	to offer
		has "main plot completed"
	on offer
		event "post-war reactions begin" 20 30
		fail

event "post-war reactions begin"


mission "War Reactions: Asteroid Miners"
	landing
	minor
	source
		government "Republic" "Syndicate" "Free Worlds"
		attributes "spaceport"
	to offer
		has "event: post-war reactions begin"
		random < 30
	on offer
		set "pug media coverage"
		log "Minor People" "Maduena Kabiru" `A senator from Bounty in the Delta Velorum system. He is somewhat paranoid, and insists upon the Navy taking greater steps to better explore the galaxy beyond human space to search for possible threats.`
		conversation
			`As you leave your ship, you see a crowd watching a video on a interactive information display, not far from your landing spot. The video jumps between a panel discussion and footage of Admiral Danforth being quizzed by Parliament. It finishes before you arrive, and many of the onlookers have left for their business, but two captains remain. By the sounds of it, they're having a passionate discussion about the video.`
			choice
				`	"Hey! What's this video about?"`
				`	(Leave them be.)`
					decline
			`	You're startled when the two captains turn to you, twin men with preposterous sideburns and rat-like mustaches. It's impossible to tell if they're smiling or frowning, as the pair live squarely in the middle of the uncanny valley.`
			`	The left twin asks, "Can you believe this? It's been weeks and everyone's still obsessing over the Pug invasion. The news was all experts and officials at first, but now we just see talking heads and conspiracy theorists."`
			`	In disbelief, the right twin responds, "It's just a propaganda exercise to boost Syndicate sales. Even if these elusive 'Pug' existed, we won't hear the end of it as long as the story boosts public opinion of the Syndicate."`
			choice
				`	"It was possibly the biggest event this century. Of course people are going to keep talking about it."`
				`	"Don't you see it was what we needed? The Pug caused us to set aside our pride and resolve our issues directly without continuing the conflict."`
				`	"Oh, the Pug were real alright. I met some and fought them."`
					goto nobody
				`	"I think you both need to shave."`
					goto scowl
			`	One twin rolls his eyes while the other twitches his mustache awkwardly. He rewinds the video to the Parliamentary discussion, where Danforth is reassuring councilors about the Navy's ability to patrol the fringes of human space.`
			`	The left twin says, "Look at this bozo! Bounty's Councilor Maduena Kabiru, he keeps ranting against this Navy guy, uh, this Admiral..." He snaps his fingers trying to remember the name.`
			`	"Admiral Danforth," says the right twin.`
			`	"Right. Danforth. This Councilor wants Danforth to defend against 'unknown dangers at the fringes of human space'. Don't we have enough immediate problems without imagining new horrors?"`
			`	"Like terrorists nuking us," says the right twin.`
			choice
				`	"The Navy is skilled and honorable. I trust them to protect us."`
					goto eyes
				`	"No, don't worry about that. I ended the bomb threat."`
				`	"Maybe you're right."`
					goto shrug
				`	"All we can do is get on with our lives, right?"`
					goto shrug
				`	"If you don't shave soon, people will think you're wearing masks."`
					goto scowl
			label nobody
			`	Both of them give hard belly laughs, sending waves through their mustaches from the breeze of their breath.`
			`	The left twin says, "Who are you, Admiral Danforts?" His twin corrects him. "Danforth. Admiral Danforth. Did the Navy fire you or are you here on holiday?"`
			choice
				`	"Have you been under a rock the whole war? I'm Captain <first> <last>!"`
				`	"Never mind."`
					goto shrug
				`	"At least I don't have a disheveled hamster stuck to my upper lip."`
					goto scowl
			`	Both twins look confused, and the left one responds. "We've been mining asteroids the whole war. The war was a big deal, but most of us had to keep living our lives. Do you think we have time to keep track of every warring captain?"`
			`	The right one says apologetically, "Thank you for your service, Captain <last>."`
			`	They both give clumsy but well-intentioned salutes and return to their ships.`
				decline
			label eyes
			`	The left twin laughs and says, "Pardon us if we keep our eyes open and trust to our own guns." Both twins nod and depart to their ships.`
				decline
			label shrug
			`	Both twins shrug and leave for their ships.`
				decline
			label scowl
			`	Both twins' faces twist in a way that might indicate embarrassment or annoyance. It's hard to tell since their facial hair is halting any emotive power. They walk away in the direction of their ships.`
				decline



mission "War Reactions: Navy and Free Worlds Captains"
	landing
	minor
	source
		government "Republic" "Syndicate" "Free Worlds"
		attributes "spaceport"
		near "Sirius" 5 100
	to offer
		has "event: post-war reactions begin"
		random < 30
	on offer
		set "pug media coverage"
		conversation
			`You are relaxing in a cafe while your ship refuels, and a pair of middle-aged captains come to your table. One is Navy, the other is Free Worlds, and they're obviously sisters.`
			`	"Captain Rain, R.N.S. Camuy," says one. "How's the <ship>, Captain <last>?"`
			`	"Captain Fiona, F.S. Baobab," says her sister. "We both saw you in battle. You're the war's most accomplished mercenary!`
			`	"We've been patrolling together and we saw your ship, so we've come to say 'hi.'"`
			label questions
			choice
				`	"Why are Navy and Free Worlds captains traveling together?"`
					goto navy
					to display
						not "War Reactions: Navy and Free Worlds Captains: label navy"
				`	"Have you found any new aliens?"`
					goto aliens
					to display
						not "War Reactions: Navy and Free Worlds Captains: label aliens"
						has "War Reactions: Navy and Free Worlds Captains: label navy"
				`	"Did you fight on the other side of the war from your sister?"`
					goto sister
					to display
						not "War Reactions: Navy and Free Worlds Captains: label sister"
				`	"Mercenary? I'm not a mercenary."`
					goto mercenary
					to display
						not "War Reactions: Navy and Free Worlds Captains: label mercenary"
				`	"It was good meeting you both, but I must get back to my business now."`
					decline
			label aliens
			action
				set "War Reactions: Navy and Free Worlds Captains: label aliens"
			`	"Only the usual assortment of hoaxes," says Rain. The sisters both laugh at this.`
			`	"Seriously, though, both the Free Worlds Senate and Republic Parliament are up in arms over fear of aliens," says Fiona. Rain adds, "Only metaphorically up in arms, this time.`
			`	"If we find new aliens, we'll let the necessary authorities know as soon as possible. You should do the same. Be discrete, avoid conflicts, and seek help if you need it."`
				goto questions
			label navy
			action
				set "War Reactions: Navy and Free Worlds Captains: label navy"
			`	"Joint police operation," says Captain Rain. "It's more common than you may think."`
			`	Captain Fiona nods. "We're shutting down a galactic Spider Funk smuggling operation. It's an illegal hallucinogenic. Not addictive, but still dangerous. The organization running it is huge, well funded, and well armed."`
			`	"Not a match for a Dreadnought and an Auxiliary, though," brags Rain.`
			`	"We have to fly all over Republic and Free Worlds space, so we have a joint patrol with one ship from each country."`
			`	"Of course, we have another mission," says Fiona. "Everywhere we go, we look out for new alien activity."`
				goto questions
			label sister
			action
				set "War Reactions: Navy and Free Worlds Captains: label sister"
			`	"Yup," Fiona says. "I blew up her Cruiser! When her ship's escape pods were veering towards a star, we rescued them."`
			`	Rain continues. "Can you imagine my surprise when I woke up on my sister's new Dreadnought?"`
			`	"Hey, you got a new Auxiliary commission afterwards," replies Fiona. "and your whole crew survived. Now we escort each other's ships during investigations."`
				goto questions
			label mercenary
			action
				set "War Reactions: Navy and Free Worlds Captains: label mercenary"
			`	"I meant no offense," says Fiona. "You're quite the hero." She thinks for a second and looks at her sister. "Rain, can you explain?"`
			`	Rain says, "We're uniformed career officers who must follow orders. Our country owns the ships, uniforms, and everything else we use. Our salaries may be meager compared to your earnings, but serving one's country is a rich reward.`
			`	"You, on the other hand, own your ship and serve whoever you want. To keep up with costs, you have to charge a lot of money for your services. Mercenaries only survive as long as you if they're skilled at both finances and combat."`
				goto questions
